<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Locatário</title> <link rel="stylesheet" th:href="@{/css/cadastro.css}">
</head>
<body>
	<nav th:fragment="main-navbar" class="navbar">
		    <div class="navbar-brand">
		        <a th:href="@{/empresarial}">Início</a>
		    </div>
		    <ul class="navbar-nav">
		        <li class="nav-item">
		            <a th:href="@{/empresarial/cliente}" class="nav-link">Clientes</a>
		        </li>
		        <li class="nav-item">
		            <a th:href="@{/empresarial/locatario}" class="nav-link">Locatários</a>
		        </li>
		        <li class="nav-item">
		            <a th:href="@{/empresarial/sala}" class="nav-link">Salas</a>
		        </li>
		        <li class="nav-item">
		            <a th:href="@{/empresarial/relatorio}" class="nav-link">Relatórios</a>
		        </li>
		    </ul>
		</nav>
	<div class="container">
        <h2>Cadastro de Locatário</h2>
		<div th:if="${mensagemErro}" class = "error-message">
						<p th:text="${mensagemErro}"></p>
		</div>
		<div th:if="${mensagemSucesso}" class = "success-message">
						<p th:text="${mensagemSucesso}"></p>
					</div>
        <form method="post" th:action="@{/empresarial/locatario/cadastro}" th:object="${locatarioDto}">
            <div class="form-group">
                <label for="name">Nome:</label>
                <input type="text" id="name" name="name" th:field="*{name}" required>
				<p th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="error-message"></p>
            </div>

            <div class="form-group">
                <label for="cpf">CPF:</label>
                <input type="text" id="cpf" name="cpf" maxlength="11" placeholder="Apenas números" th:field="*{cpf}" required>
				<p th:if="${#fields.hasErrors('cpf')}" th:errors="*{cpf}" class="error-message"></p>
            </div>
			
			<div class="form-group">
			    <label for="rg">RG:</label>
			    <input type="text" id="rg" name="rg" maxlength="7" placeholder="Apenas números" th:field="*{rg}" required>
                <p th:if="${#fields.hasErrors('rg')}" th:errors="*{rg}" class="error-message"></p>
			</div>
			
			<div class="form-group">
			    <label for="nacionalidade">Nacionalidade:</label>
			    <input type="text" id="nacionalidade" name="nacionalidade" th:field="*{nacionalidade}" >
			</div>
			
			<div class="form-group">
			    <label for="estadoCivil">Estado Civil:</label>
			    <input type="text" id="estadoCivil" name="estadoCivil" th:field="*{estadoCivil}" required>
			</div>
			
			<div class="form-group">
			     	<label for="phone">Telefone:</label>
			     	<input type="tel" id="phone" name="phone" maxlength="11" placeholder="Apenas números (Ex: 81999999999)" th:field="*{phone}">
			</div>


			<div class="form-group">
			    	<label for="email">E-mail:</label>
			       	<input type="email" id="email" name="email" th:field="*{email}">
			</div>
			
			<h3>Dados de Endereço</h3> <div class="form-group">
					<label for="rua">Rua:</label>
					<input type="text" id="rua" name="rua" th:field="*{endereco.rua}">
			</div>
			
			<div class="form-group">
					<label for="bairro">Bairro:</label>
					<input type="text" id="bairro" name="bairro" th:field="*{endereco.bairro}" >
			</div>
			
			<div class="form-group">
					<label for="numero">Número:</label>
					<input type="text" id="numero" name="numero" th:field="*{endereco.numero}" placeholder="Apenas números" >
			</div>
			
			<div class="form-group">
					<label for="cep">CEP:</label>
					<input type="text" id="cep" name="cep" th:field="*{endereco.cep}" placeholder="Apenas números" >
			</div>
										
			<div class="form-group">
                <label>Sexo:</label>
                <div class="radio-group">
                    <input type="radio" id="masculino" name="genero" value="masculino" th:field="*{genero}" required>
                    <label for="masculino">Masculino</label>
                    <input type="radio" id="feminino" name="genero" value="feminino" th:field="*{genero}" required>
                    <label for="feminino">Feminino</label>
                </div>
            </div>

            <div class="form-group">
                <label for="job">Profissão:</label>
                <input type="text" id="job" name="job" th:field="*{job}" required>
            </div>

			<button type="submit" class="btn-primary">Cadastrar</button> 

        </form>
    </div>

    <script>
        // Função para permitir apenas números em um input
        function allowOnlyNumbers(inputElement) {
            inputElement.addEventListener('input', function(event) {
                // Remove qualquer caractere que não seja um dígito
                this.value = this.value.replace(/\D/g, '');
            });
        }

        // Aplica a função aos campos numéricos
        const cpfInput = document.getElementById('cpf');
        const phoneInput = document.getElementById('phone'); // CORRIGIDO: id="phone"
		const cepInput = document.getElementById('cep');
		const rgInput = document.getElementById('rg');
		const numeroInput = document.getElementById('numero'); // CORRIGIDO: id="numero"

        // Verifica se o elemento existe antes de tentar aplicar o event listener
        if(cpfInput) allowOnlyNumbers(cpfInput);
        if(phoneInput) allowOnlyNumbers(phoneInput);
		if(cepInput) allowOnlyNumbers(cepInput);
		if(rgInput) allowOnlyNumbers(rgInput);
		if(numeroInput) allowOnlyNumbers(numeroInput);
    </script>
</body>
</html>